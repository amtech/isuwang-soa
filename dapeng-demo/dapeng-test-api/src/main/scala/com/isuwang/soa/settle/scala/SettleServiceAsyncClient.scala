package com.isuwang.soa.settle.scala

import com.isuwang.dapeng.core._;
import com.isuwang.org.apache.thrift._;
import java.util.ServiceLoader;
import java.util.concurrent.CompletableFuture;
import com.isuwang.soa.settle.scala.SettleServiceAsyncCodec._;
import com.isuwang.soa.settle.scala.service.SettleServiceAsync;
import scala.compat.java8.FutureConverters._
import scala.concurrent.duration._
import scala.concurrent.Future
import scala.concurrent.ExecutionContext.Implicits.global

/**
  * Autogenerated by Dapeng-Code-Generator (1.2.2)
  *
  * DO NOT EDIT UNLESS YOU ARE SURE THAT YOU KNOW WHAT YOU ARE DOING
  *
  * @generated
  *
  **/
class SettleServiceAsyncClient extends SettleServiceAsync {

  val serviceName = "com.isuwang.soa.settle.service.SettleService"
  val version = "1.0.0"
  val pool = {
    val serviceLoader = ServiceLoader.load(classOf[SoaConnectionPoolFactory])
    if (serviceLoader.iterator().hasNext) {
      val poolImpl = serviceLoader.iterator().next().getPool
      poolImpl.registerClientInfo(serviceName, version)
      poolImpl
    } else null
  }

  def getServiceMetadata: String = {
    pool.send(
      serviceName,
      version,
      "getServiceMetadata",
      new getServiceMetadata_args,
      new GetServiceMetadata_argsSerializer,
      new GetServiceMetadata_resultSerializer
    ).success
  }


  /**
    *
    **/
  def createSettle(settle: com.isuwang.soa.settle.scala.domain.Settle
                   , timeout: Long = 5000): Future[Unit] = {

    val response = pool.sendAsync(
      serviceName,
      version,
      "createSettle",
      createSettle_args(settle),
      new CreateSettle_argsSerializer(),
      new CreateSettle_resultSerializer()
      , timeout).asInstanceOf[CompletableFuture[createSettle_result]]

    toScala(response).map(null)

  }


  /**
    *
    **/
  def getSettleById(settleId: Int
                    , timeout: Long = 5000): Future[com.isuwang.soa.settle.scala.domain.Settle] = {

    val response = pool.sendAsync(
      serviceName,
      version,
      "getSettleById",
      getSettleById_args(settleId),
      new GetSettleById_argsSerializer(),
      new GetSettleById_resultSerializer()
      , timeout).asInstanceOf[CompletableFuture[getSettleById_result]]

    toScala(response).map(_.success)

  }


}
      